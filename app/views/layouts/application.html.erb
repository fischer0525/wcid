<!DOCTYPE html>
<html>
  <head>
    <title>What Can I Do</title>
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
  </head>

  <body class="controller-<%= params[:controller] %>">
  <div class="top-bar">
    <div class="top-bar-left">
      <ul class="dropdown menu" data-dropdown-menu>
        <li class="title"><%=link_to "WCID | what.can.I.do?", root_path, class: "link-title"%></li>
      </ul>
    </div>
    <div class="top-bar-right">
      <%= form_tag(events_path, method: :get) do %>
      <ul class="menu">
        <li><%= text_field_tag :term, params[:term] %></li>
        <li><%= submit_tag 'Search', name: nil, class: "button" %></li>
        <% end %>
      <% if request.env['PATH_INFO'] != "/users/sign_up" && request.env['PATH_INFO'] != "/users/sign_in" && request.env['PATH_INFO'] != "/users/edit" %>
        <% if user_signed_in? %>
          <li class="top-bar-link">
            <%= link_to "Sign Out", destroy_user_session_path, class: "top-links", method: :delete %>
          </li>
          <li class="top-bar-link">
            <%= link_to "My Account", edit_user_registration_path, class: "top-links"%>
          </li>
        <% else %>
          <li class="top-bar-link">
            <%= link_to "Sign In", new_user_session_path, class: "top-links" %>
          </li>
          <li class="top-bar-link">
            <%= link_to "Sign Up", new_user_registration_path, class: "top-links" %>
          </li>
        <% end %>
      <% end %>
      <% if current_user %>
        <li class="top-bar-link">
          <%=link_to "Create Event", new_event_path, class: "top-links" %>
        </li>
      <% end %>
      </ul>
    </div>
  </div>
        <div class="flash">
          <% if flash[:notice] %>
            <% if flash[:notice].is_a?(String) %>
              <%= flash[:notice] %>
            <% else %>
              <% flash[:notice].each do |key, value| %>
                <% if value.is_a?(Array) %>
                  <% value.each do |error| %>
                    <%= "#{key.capitalize} #{error}." %>
                  <% end %>
                <% else %>
                  <%= "#{key.capitalize} #{value}." %>
                <% end %>
                <br />
              <% end %>
            <% end %>
          <% end %>

          <% unless flash[:notice] %>
            <% flash.each do |name, msg| %>
              <%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
            <% end %>
          <% end %>
        </div>
        <%= yield %>

        </body>
      </html>
